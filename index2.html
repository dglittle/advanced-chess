<html>
<head>
	<style>
		.square{
			position: relative;
		}
		.square > .piece{
			position: absolute;
			width: 100%;
			height: 100%;
			z-index: 2;
			color: #000;
		}
		.square > .piece.bg{
			z-index: 1;
			color: #fff;
		}
	</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

function drawChessBoard(size, fen) {
	fen = fen || "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"
	fen = fen.split(/ /)[0]

	var pieces = new Array();
	pieces["P"] = "&#9817";
	pieces["R"] = "&#9814";
	pieces["N"] = "&#9816";
	pieces["B"] = "&#9815";
	pieces["K"] = "&#9812";
	pieces["Q"] = "&#9813";
	pieces["p"] = "&#9823";
	pieces["r"] = "&#9820";
	pieces["n"] = "&#9822";
	pieces["b"] = "&#9821";
	pieces["k"] = "&#9818";
	pieces["q"] = "&#9819";
	pieces[" "] = "";

	var d = $('<div/>').addClass("chess-board").css("width", size).css("height", size);
	var squareSize = size / 8;

	fen = fen.replace( /\//g , "" );
	fen = fen.replace( /1/g , " " );
	fen = fen.replace( /2/g , "  " );
	fen = fen.replace( /3/g , "   " );
	fen = fen.replace( /4/g , "    " );
	fen = fen.replace( /5/g , "     " );
	fen = fen.replace( /6/g , "      " );
	fen = fen.replace( /7/g , "       " );
	fen = fen.replace( /8/g , "        " );

	var key,
		bgcolor,
		oppositePieceKey = '';
	for( var i = 7 ; i >= 0 ; i-- ) {
		for( var j = 0 ; j <= 7 ; j++){
			bgcolor = ( ( i + j ) % 2 == 0 ) ? "lightgrey" : "white";
			key = fen[ (7-i)*8+j ];

			//piece element
			piece = $('<div />', {
				class: 'piece'
			}).html(pieces[key]);

			//add white opposite piece behind it
			oppositePieceKey = '';
			if(key.match(/[a-z]/))
				oppositePieceKey = key.toUpperCase();
			else if(key.match(/[A-Z]/))
				oppositePieceKey = key.toLowerCase();

			pieceBg = piece.clone()
				.addClass('bg')
				.html(pieces[oppositePieceKey]);

			var sq = $('<div/>').addClass("square").html([piece, pieceBg]).css({
				background : bgcolor,
				width : squareSize,
				height : squareSize,
				padding : '0px',
				float : 'left',
				'text-align' : 'center',
				'vertical-align' : 'top',
				'font-size' : squareSize * .9,
			})
			d.append(sq);
		}
	}

	return d
}

$(function () {
	$('body').append(drawChessBoard(400).css('box-shadow', '2px 2px 15px rgba(0, 0, 0, 0.5)'))
})
			
</script>
</head>
<body>
</body>
</html>
